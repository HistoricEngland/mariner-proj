{% extends "base.htm" %}
{% load static %}
{% load i18n %}

{% block loading_mask %}
{% endblock loading_mask %}

{% block body %}

<div id="container" class="cls-container arches-login">

	<header>
		<div class="header-bar">
			<div title="Mariner - login page" class="header-bar__logo">
				<div class="header-bar__logo-heading">
					<a href="/" class="header-bar__logo-link" aria-label="Link to homepage">
						<img class="header-bar__logo-image" src="{{ STATIC_URL }}img/HE_Logo_RGB.svg" alt="Historic England logo">
					</a>
				</div>
			</div>
		</div>
	</header>

	<main>
		<form id="login-form" action="?next={{ next }}" method='POST' {% if auth_failed %} autocomplete="off" {% endif %}>
			<fieldset>
				<legend class="arches-signin-subtext">
					{% trans "Sign In" %}
				</legend>
				<p>
					{% trans "If you don't have an account, please email<br /><a href=\"mailto:Maritime@HistoricEngland.org.uk\">Maritime@HistoricEngland.org.uk</a>" %}
				</p>
				{% csrf_token %}
				<input type="hidden" name="next" value="{{ next }}" />
				<div class="form-group">
					<label class="reqlabel control-label widget-input-label" for="username">{% trans "Username" %}</label>
					<input id="username" type="text" class="form-control input-lg" name="username" autofocus aria-required="true" required>
				</div>
				<div class="form-group">
					<label class="reqlabel control-label widget-input-label" for="password">{% trans "Password" %}</label>
					<input id="password" type="password" class="form-control input-lg" name="password" aria-required="true" required>
				</div>
				<div class="form-group">
					<p><a href="{% url 'password_reset' %}">{% trans "Forgotten your password?" %}</a></p>
					{% if user_signup_enabled %}
					<p><a href="{% url 'signup' %}" target="_blank">{% trans "Create a new account" %}</a></p>
					{% endif %}
					<button id ="sign-in-button" class="btn btn-primary btn-lg" type="submit">{% trans "Sign in" %}</button>
				</div>
				<div style="{% if not auth_failed %}display:none;{% endif %}" id="login-failed-alert" class="alert alert-danger fade in" role="alert" aria-live="Assertive">
					<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">{% trans "Close" %}</span></button>
					<p class="alert-title">{% trans "Login failed" %}</p>
					<span>{% trans "Invalid username and/or password." %}</span>
				</div>
			</fieldset>
		</form>
		<div class="row row-cancel-button">
			<button id="login-cancel-button" class="btn btn-lg btn-default" onclick="location.href='/';" onkeyup="if(event.which == 13 || event.keyCode == 13){ location.href='/'; }">{% trans "Return to Mariner home" %}</button>
		</div>
	</main>

</div>

{% endblock body %}